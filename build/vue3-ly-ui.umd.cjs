(function(s,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(s=typeof globalThis<"u"?globalThis:s||self,t(s["vue3-ly-ui"]={},s.vue))})(this,function(s,t){"use strict";const f="u",p="_LyUI";function b(e,o,l){h(e,l),e.component(o.name,o)}function h(e,o={classPrefix:f}){e.config.globalProperties[p]={...e.config.globalProperties[p]??{},classPrefix:o.classPrefix}}const x=e=>`${f}-${e}`,S={type:{type:String,default:"default"},size:{type:String,default:"default"},disabled:{type:Boolean,default:!1},tag:{type:String,default:"button"},onClick:{type:Function}};function C(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!t.isVNode(e)}const g=t.defineComponent({name:"ly-button",props:S,setup(e,{slots:o}){const{type:l,size:c,disabled:d}=t.toRefs(e),i=x("button"),n=t.computed(()=>[i,`${i}--${l.value}`,`${i}--${c.value}`,d.value?"is-disabled":""]);return()=>{const{tag:a}=e,r=o.default?o.default():"按钮";return t.createVNode(a,{disabled:d.value,class:n.value},C(r)?r:{default:()=>[r]})}}}),m=t.defineComponent({name:"ly-icon",props:{name:{type:String,default:""},size:{type:[String,Number],default:"inherit"},color:{type:String,default:"inherit"}},setup(e,{attrs:o}){const l=t.computed(()=>typeof e.size=="number"?`${e.size}px`:e.size),c=t.createVNode("img",t.mergeProps({src:e.name},o,{style:{width:l.value,verticalAlign:"middle"}}),null),d=t.createVNode("i",{class:["u-icon-"+e.name],style:{fontSize:l.value,color:e.color}},null),i=/http|https/.test(e.name)?c:d;return()=>i}}),N={data:{type:Object,required:!0}};function y(e=[],o=0,l=null){return o++,e.reduce((c,d)=>{const i={...d};if(i.level=o,i.parentId=l,i.children){const n=i.id,a=y(i.children,o,n);return delete i.children,c.concat(i,a)}else return i.isLeaf=!0,c.concat(i)},[])}function I(e){return{innerData:t.ref(y(t.unref(e)))}}const P=[g,t.defineComponent({name:"UTree",props:N,setup(e,{slots:o}){const{innerData:l}=I(e.data),c=n=>{console.log("toggle:",n);const a=l.value.find(r=>r.id===n.id);a&&(a.expanded=!a.expanded)},d=t.computed(()=>{let n=[],a=[];for(let r of l.value)n.includes(r)||(r.expanded!==!0&&(n=i(r)),a.push(r));return a}),i=n=>{const a=l.value.findIndex(u=>u.id===n.id);let r=[];for(let u=a+1;u<l.value.length&&l.value[u].level>n.level;u++)r.push(l.value[u]);return r};return()=>t.createVNode("div",{class:"u-tree"},[d.value.map(n=>t.createVNode("div",{style:{paddingLeft:`${20*(n.level-1)}px`}},[n.isLeaf?t.createVNode("span",{style:{display:"inline-block",width:"24px"}},null):t.createVNode("span",{onClick:()=>c(n)},[t.createVNode(m,{name:n.expanded?"caret-bottom":"caret-right",size:14,color:"gray"},null)]),n.label]))])}}),m],z={install(e,o){P.forEach(l=>{b(e,l,o)})}};s.Button=g,s.default=z,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
